#default_realm = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }}
[libdefaults]

    default_tgs_encrypes = aes128-cts-hmac-sha256-128 aes256-cts-hmac-sha384-192 aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 camellia256-cts-cmac camellia128-cts-cmac
    default_tkt_enctypes = aes128-cts-hmac-sha256-128 aes256-cts-hmac-sha384-192 aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 camellia256-cts-cmac camellia128-cts-cmac
    permitted_enctypes   = aes128-cts-hmac-sha256-128 aes256-cts-hmac-sha384-192 aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96 camellia256-cts-cmac camellia128-cts-cmac
    clockskew = 300
    kdc_timesync = 1
    default_ccache_name = KEYRING:process:krb_cache
    ccache_type = 4
    forwardable = false
    proxiable = false
    default_realm = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }}

[realms]
    {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }} = {
        kdc = {{ hostvars[plbr_domain_dc_inventory_key].plbr_hostname }}.{{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }}
        admin_server = {{ hostvars[plbr_domain_dc_inventory_key].plbr_hostname }}.{{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }}
        kpasswd_server = {{ hostvars[plbr_domain_dc_inventory_key].plbr_hostname }}.{{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }}
        default_domain = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }}
    }

[domain_realm]
    {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }} = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }}
    .{{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }} = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }}
    # python3 -c 'import socket; print(socket.getfqdn())'
    {{ plbr_hostname }}.{{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name }} = {{ hostvars[plbr_domain_dc_inventory_key].plbr_domain_name | upper }}

